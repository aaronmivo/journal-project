(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{84:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(26),c=n.n(a),o=n(25),s=n(8),i=n(9),u=n(10),l=n.n(u),j=n(19),b=n(16),d=n.n(b),p="https://chingu-journal-solo.herokuapp.com/auth",f={register:function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("".concat(p,"/register"),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("".concat(p,"/login"),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("".concat(p,"/logout"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),loggedIn:function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("".concat(p,"/loggedIn"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},O=n(2),h=Object(r.createContext)(),x=function(e){var t=Object(r.useState)(void 0),n=Object(i.a)(t,2),a=n[0],c=n[1],o=function(){f.loggedIn().then((function(e){c(e.data)}))};return Object(r.useEffect)((function(){o()}),[]),Object(O.jsx)(h.Provider,{value:{user:a,getUser:o},children:e.children})},g=h,v=(n(84),n(102)),m=n(101),y=n(96),w=function(){var e=Object(r.useContext)(g),t=e.user,n=e.getUser;return Object(O.jsxs)(v.a,{className:"navbar",bg:"light",variant:"light",children:[Object(O.jsx)(v.a.Brand,{variant:"primary",as:o.b,to:"/",children:"Digital Journal"}),Object(O.jsx)(m.a,{className:"ml-auto",children:null===t?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.a.Link,{as:o.b,to:"/login",children:"Login"}),Object(O.jsx)(m.a.Link,{as:o.b,to:"/register",children:"Register"})]}):Object(O.jsx)(y.a,{onClick:function(){f.logout().then((function(){n()}))},variant:"outline-primary",children:"Logout"})})]})},N="https://chingu-journal-solo.herokuapp.com/notes",C={getNotes:function(){return d.a.get("".concat(N))},createNote:function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post(N,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteNote:function(e){return d.a.delete("".concat(N,"/").concat(e))},updateNote:function(e,t){return d.a.put("".concat(N,"/").concat(e),t)}},k=n(103),S=(n(91),function(e){var t=e.note,n=e.getNotes,r=e.editNote;return Object(O.jsxs)(k.a,{style:{margin:"0.5rem"},children:[Object(O.jsx)(k.a.Header,{children:t.title}),Object(O.jsxs)(k.a.Body,{children:[Object(O.jsx)(k.a.Text,{children:t.content}),Object(O.jsx)(y.a,{variant:"danger",onClick:function(){C.deleteNote(t._id).then((function(){n()})).catch((function(e){return e}))},children:"Delete"}),Object(O.jsx)(y.a,{style:{margin:"0.5rem"},variant:"primary",onClick:function(){return r(t)},children:"Edit"})]})]})}),B=n(100),I=(n(92),function(e){e.notes,e.setNotes;var t=e.getNotes,n=e.editNoteData,a=e.setEditNoteData,c=Object(r.useState)(""),o=Object(i.a)(c,2),s=o[0],u=o[1],l=Object(r.useState)(""),j=Object(i.a)(l,2),b=j[0],d=j[1];Object(r.useEffect)((function(){n&&(u(n.title?n.title:""),d(n.content?n.content:""))}),[n]);return Object(O.jsxs)(B.a,{onSubmit:function(e){e.preventDefault();var r={title:s||void 0,content:b||void 0};n?C.updateNote(n._id,r).then((function(){t(),d(""),u(""),a(null)})).catch((function(e){return console.log(e)})):C.createNote(r).then((function(){t(),d(""),u("")})).catch((function(e){return e})),t()},className:"form",children:[Object(O.jsxs)(B.a.Group,{controlId:"formBasicTitle",children:[Object(O.jsx)(B.a.Label,{children:"Title"}),Object(O.jsx)(B.a.Control,{type:"text",value:s,onChange:function(e){return u(e.target.value)}})]}),Object(O.jsxs)(B.a.Group,{controlId:"formBasicNote",children:[Object(O.jsx)(B.a.Label,{children:"Note"}),Object(O.jsx)(B.a.Control,{type:"text",value:b,onChange:function(e){return d(e.target.value)}})]}),Object(O.jsx)(y.a,{variant:"primary",type:"submit",children:"Submit"})]})}),D=n(97),E=function(){return Object(O.jsx)(D.a,{style:{margin:"2rem"},variant:"warning",children:"Must be logged in to add a note."})},L=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),o=Object(i.a)(c,2),s=o[0],u=o[1],l=Object(r.useContext)(g).user;Object(r.useEffect)((function(){l?j():a([])}),[l]);var j=function(){null===l?a([]):C.getNotes().then((function(e){a(e.data)}))},b=function(e){u(e)},d=function(){return n.map((function(e){return Object(O.jsx)(S,{note:e,getNotes:j,editNote:b},e._id)}))};return Object(O.jsxs)("div",{className:"home",children:[l?Object(O.jsx)(I,{notes:n,setNotes:a,getNotes:j,showNotes:d,editNoteData:s,setEditNoteData:u}):Object(O.jsx)(E,{}),d()]})},G=n(99),M=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(i.a)(c,2),u=o[0],b=o[1],d=Object(r.useState)(""),p=Object(i.a)(d,2),h=p[0],x=p[1],v=Object(r.useState)(!1),m=Object(i.a)(v,2),w=m[0],N=m[1],C=Object(r.useState)(null),k=Object(i.a)(C,2),S=k[0],I=k[1],D=Object(r.useContext)(g).getUser,E=Object(s.f)(),L=function(){N(!1)},M=function(){var e=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={username:n,password:u,passwordVerify:h},e.prev=2,e.next=5,f.register(r);case 5:e.next=15;break;case 7:if(e.prev=7,e.t0=e.catch(2),!e.t0.response){e.next=14;break}if(!e.t0.response.data.errorMessage){e.next=14;break}return console.log(e.t0.response.data.errorMessage),N(!0),e.abrupt("return",I(e.t0.response.data.errorMessage));case 14:return e.abrupt("return");case 15:return e.next=17,D();case 17:E.push("/");case 18:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(G.a,{show:w,onHide:L,children:[Object(O.jsx)(G.a.Header,{closeButton:!0,children:Object(O.jsx)(G.a.Title,{children:"Registration Error"})}),Object(O.jsx)(G.a.Body,{children:S}),Object(O.jsx)(G.a.Footer,{children:Object(O.jsx)(y.a,{variant:"primary",onClick:L,children:"Close"})})]}),Object(O.jsxs)(B.a,{onSubmit:M,className:"form",children:[Object(O.jsx)(B.a.Group,{controlId:"formBasicTitle",children:Object(O.jsx)(B.a.Control,{placeholder:"Username",type:"text",value:n,onChange:function(e){return a(e.target.value)}})}),Object(O.jsx)(B.a.Group,{controlId:"formBasisPassword",children:Object(O.jsx)(B.a.Control,{placeholder:"Password",type:"password",value:u,onChange:function(e){return b(e.target.value)}})}),Object(O.jsx)(B.a.Group,{controlId:"formBasicVPassword",children:Object(O.jsx)(B.a.Control,{placeholder:"Verify Password",type:"password",value:h,onChange:function(e){return x(e.target.value)}})}),Object(O.jsx)(y.a,{variant:"primary",type:"submit",children:"Register"})]})]})},T=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(i.a)(c,2),u=o[0],b=o[1],d=Object(r.useState)(null),p=Object(i.a)(d,2),h=p[0],x=p[1],v=Object(r.useState)(!1),m=Object(i.a)(v,2),w=m[0],N=m[1],C=Object(s.f)(),k=Object(r.useContext)(g).getUser,S=function(){N(!1)},I=function(){var e=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={username:n,password:u},e.prev=2,e.next=5,f.login(r);case 5:e.next=15;break;case 7:if(e.prev=7,e.t0=e.catch(2),!e.t0.response){e.next=14;break}if(!e.t0.response.data.errorMessage){e.next=14;break}return console.log(e.t0.response.data.errorMessage),N(!0),e.abrupt("return",x(e.t0.response.data.errorMessage));case 14:return e.abrupt("return");case 15:return e.next=17,k();case 17:C.push("/");case 18:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(G.a,{show:w,onHide:S,children:[Object(O.jsx)(G.a.Header,{closeButton:!0,children:Object(O.jsx)(G.a.Title,{children:"Login Error"})}),Object(O.jsx)(G.a.Body,{children:h}),Object(O.jsx)(G.a.Footer,{children:Object(O.jsx)(y.a,{variant:"primary",onClick:S,children:"Close"})})]}),Object(O.jsxs)(B.a,{onSubmit:I,className:"form",children:[Object(O.jsx)(B.a.Group,{controlId:"formBasicTitle",children:Object(O.jsx)(B.a.Control,{placeholder:"Username",type:"text",value:n,onChange:function(e){return a(e.target.value)}})}),Object(O.jsx)(B.a.Group,{controlId:"formBasicNote",children:Object(O.jsx)(B.a.Control,{placeholder:"Password",type:"password",value:u,onChange:function(e){return b(e.target.value)}})}),Object(O.jsx)(y.a,{variant:"primary",type:"submit",children:"Login"})]})]})},P=function(){return Object(O.jsxs)(o.a,{children:[Object(O.jsx)(w,{}),Object(O.jsxs)(s.c,{children:[Object(O.jsx)(s.a,{exact:!0,path:"/",children:Object(O.jsx)(L,{})}),Object(O.jsx)(s.a,{path:"/login",children:Object(O.jsx)(T,{})}),Object(O.jsx)(s.a,{path:"/register",children:Object(O.jsx)(M,{})})]})]})},U=(n(93),n(98));d.a.defaults.withCredentials=!0;var F=function(){return Object(O.jsx)(U.a,{fluid:"md",children:Object(O.jsx)(x,{children:Object(O.jsx)(P,{})})})};c.a.render(Object(O.jsx)(F,{}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.735c9d5c.chunk.js.map